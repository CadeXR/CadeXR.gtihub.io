"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[904],{4943:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(7437),i=r(2265),a=r(9376);function o(){let e=(0,a.usePathname)().includes("home"),t={NORMAL:4,TRANSITION:4},r=(0,i.useRef)(null),o=(0,i.useRef)([]),l=(0,i.useRef)(),s=(0,i.useRef)(new Map);(0,i.useRef)(1);let c=(0,i.useRef)(!1),d=(0,i.useRef)(0),u=(0,i.useRef)("in"),h=(0,i.useRef)({x:0,y:0}),f=(0,i.useRef)([]),g=(0,i.useRef)([]),[x,y]=(0,i.useState)(190),m=(0,i.useCallback)(e=>{o.current=Array.from({length:100},()=>{let r=Math.random()*Math.PI*2;return{x:Math.random()*e.width,y:Math.random()*e.height,vx:3*Math.cos(r),vy:3*Math.sin(r),size:t.NORMAL,trail:[],isFollowing:!1,followingWindowId:null,isOrbiting:!1,orbitAngle:Math.random()*Math.PI*2,orbitRadius:30+30*Math.random(),transitionProgress:0,edgeIndex:Math.floor(4*Math.random())}})},[]),b=(0,i.useCallback)(e=>{f.current=Array.from({length:150},()=>{let r=Math.random()*Math.PI*2;return{x:Math.random()*e.width,y:Math.random()*e.height,vx:1.5*Math.cos(r),vy:1.5*Math.sin(r),size:.75*t.NORMAL,trail:[],isFollowing:!1,followingWindowId:null,isOrbiting:!1,orbitAngle:Math.random()*Math.PI*2,orbitRadius:30+30*Math.random(),transitionProgress:0,edgeIndex:Math.floor(4*Math.random())}})},[]),v=(0,i.useCallback)(t=>{if(!e){g.current=[];return}let r=window.innerWidth/2,n=window.innerHeight/2;g.current=Array.from({length:25},(e,t)=>{let i=2*Math.PI*t/25;return{x:r+190*Math.cos(i),y:n+190*Math.sin(i),angle:i,speed:.007*(.8+.4*Math.random()),size:1.5,trail:[]}})},[e]),w=(0,i.useCallback)(r=>{let n=r.getContext("2d");if(!n)return;if(c.current){let e=Math.min((performance.now()-d.current)/3500,1);e>=1&&(c.current=!1),o.current.forEach(r=>{"in"===u.current?r.size=t.NORMAL+(t.TRANSITION-t.NORMAL)*e:r.size=t.TRANSITION-(t.TRANSITION-t.NORMAL)*e})}let i=Array.from(s.current.values()).filter(e=>e.isActive);if(o.current.forEach(e=>{let t=e.x-h.current.x,n=e.y-h.current.y,a=Math.sqrt(t*t+n*n);if(a<20&&(e.x=h.current.x+t/a*20,e.y=h.current.y+n/a*20),i.length>0){let t,r;let n=i[0];e.isOrbiting||(e.isOrbiting=!0,e.edgeIndex=Math.floor(4*Math.random()));let a=n.right-n.left,o=n.bottom-n.top,l=e.orbitAngle/(2*Math.PI)%1;switch(e.edgeIndex){case 0:t=n.left+a*l,r=n.top+20;break;case 1:t=n.right-20,r=n.top+o*l;break;case 2:t=n.right-a*l,r=n.bottom-20;break;case 3:t=n.left+20,r=n.bottom-o*l;break;default:t=e.x,r=e.y}let s=t-e.x,c=r-e.y,d=Math.sqrt(s*s+c*c);d>0&&(e.vx=s/d*3,e.vy=c/d*3),e.x+=e.vx,e.y+=e.vy,e.orbitAngle+=.02,l>=.98&&(e.edgeIndex=(e.edgeIndex+1)%4)}else{if(e.isOrbiting){let t=Math.random()*Math.PI*2;e.vx=3*Math.cos(t),e.vy=3*Math.sin(t),e.isOrbiting=!1}e.x+=e.vx,e.y+=e.vy,(e.x<=0||e.x>=r.width)&&(e.vx*=-1),(e.y<=0||e.y>=r.height)&&(e.vy*=-1)}e.trail.push({x:e.x,y:e.y}),e.trail.length>100&&e.trail.shift()}),n.fillStyle="#ffffff",o.current.forEach(e=>{e.trail.length>1&&(n.beginPath(),n.moveTo(e.trail[0].x,e.trail[0].y),e.trail.forEach((e,t)=>{0!==t&&n.lineTo(e.x,e.y)}),n.strokeStyle="rgba(255, 255, 255, ".concat(.4,")"),n.stroke()),n.beginPath(),n.arc(e.x,e.y,e.size,0,2*Math.PI),n.fillStyle="rgba(255, 255, 255, 0.68)",n.fill()}),e){let e=window.innerWidth/2,t=window.innerHeight/2;g.current.forEach(r=>{r.angle+=r.speed,r.x=e+190*Math.cos(r.angle),r.y=t+190*Math.sin(r.angle),r.trail.push({x:r.x,y:r.y}),r.trail.length>100&&r.trail.shift(),r.trail.length>1&&(n.beginPath(),n.moveTo(r.trail[0].x,r.trail[0].y),r.trail.forEach((e,t)=>{t>0&&n.lineTo(e.x,e.y)}),n.strokeStyle="rgba(255, 255, 255, ".concat(.4,")"),n.stroke()),n.beginPath(),n.arc(r.x,r.y,r.size,0,2*Math.PI),n.fillStyle="rgba(255, 255, 255, 0.8)",n.fill()})}},[e]),M=(0,i.useCallback)(e=>{let t=e.getContext("2d");t&&f.current.forEach(r=>{r.x+=r.vx,r.y+=r.vy,r.x<=10?(r.x=10,r.vx=Math.abs(r.vx)):r.x>=e.width-10&&(r.x=e.width-10,r.vx=-Math.abs(r.vx)),r.y<=10?(r.y=10,r.vy=Math.abs(r.vy)):r.y>=e.height-10&&(r.y=e.height-10,r.vy=-Math.abs(r.vy)),(r.x<=10||r.x>=e.width-10)&&(r.vy+=(Math.random()-.5)*.5),(r.y<=10||r.y>=e.height-10)&&(r.vx+=(Math.random()-.5)*.5),r.trail.push({x:r.x,y:r.y}),r.trail.length>100&&r.trail.shift(),r.trail.length>1&&(t.beginPath(),t.moveTo(r.trail[0].x,r.trail[0].y),r.trail.forEach((e,r)=>{0!==r&&t.lineTo(e.x,e.y)}),t.strokeStyle="rgba(255, 255, 255, ".concat(.2,")"),t.stroke()),t.beginPath(),t.arc(r.x,r.y,r.size,0,2*Math.PI),t.fillStyle="#ffffff",t.fill()})},[]),p=(0,i.useCallback)(e=>{let t=r.current;if(!t)return;let n=t.getContext("2d");n&&(n.fillStyle="black",n.fillRect(0,0,t.width,t.height),M(t),w(t),l.current=requestAnimationFrame(p))},[w,M]);return(0,i.useEffect)(()=>{let e=r.current;if(!e)return;let t=e=>{let t=e.detail.direction;c.current=!0,d.current=performance.now(),u.current="grow"===t?"in":"out",document.querySelectorAll(".scene-transition-grow, .scene-transition-shrink").forEach(e=>e.remove());let r=document.createElement("div");r.className="scene-transition-".concat(t),document.body.appendChild(r),setTimeout(()=>{r.remove()},3500)};return e.addEventListener("startTransition",t),()=>{e.removeEventListener("startTransition",t),document.querySelectorAll(".scene-transition-grow, .scene-transition-shrink").forEach(e=>e.remove())}},[]),(0,i.useEffect)(()=>{let e=r.current;if(!e)return;let t=e=>{let{bounds:t,id:r}=e.detail;t?s.current.set(r||"default",{...t,id:r||"default",isActive:t.isActive}):s.current.delete(r||"default")};return e.addEventListener("windowUpdate",t),()=>{e.removeEventListener("windowUpdate",t)}},[]),(0,i.useEffect)(()=>{let e=e=>{h.current={x:e.clientX,y:e.clientY}};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[]),(0,i.useEffect)(()=>{let e=r.current;if(!e)return;let t=()=>{e.width=window.innerWidth,e.height=window.innerHeight,m(e),b(e),v(e)};return t(),l.current=requestAnimationFrame(p),window.addEventListener("resize",t),()=>{l.current&&cancelAnimationFrame(l.current),window.removeEventListener("resize",t)}},[p,m,b,v]),(0,i.useCallback)(e=>{y(e)},[]),(0,i.useEffect)(()=>{console.log("Scene mounted");let e=r.current;if(!e){console.error("Canvas not found");return}console.log("Canvas dimensions:",e.width,e.height);let t=e.getContext("2d");if(!t){console.error("Could not get 2D context");return}t.fillStyle="black",t.fillRect(0,0,e.width,e.height)},[]),(0,i.useEffect)(()=>{let e=r.current;e&&v(e)},[v,e]),(0,n.jsx)("canvas",{ref:r,className:"fixed top-0 left-0 w-full h-full",style:{backgroundColor:"black",zIndex:1},"data-scene":!0})}},3176:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(7437),i=r(1906),a=r(5095),o=r(9124),l=r(2265);function s(e){var t,r;let{id:s,isOpen:c,onClose:d,children:u,defaultPosition:h,onMove:f,style:g,className:x,showCloseButton:y=!0}=e,[m,b]=(0,l.useState)(!1),v=(0,i.c)(null!==(t=null==h?void 0:h.x)&&void 0!==t?t:0),w=(0,i.c)(null!==(r=null==h?void 0:h.y)&&void 0!==r?r:0);(0,l.useEffect)(()=>{console.log("FrostedWindow ".concat(s," isOpen:"),c),console.log("FrostedWindow ".concat(s," position:"),h)},[s,c,h]),(0,l.useEffect)(()=>{if(!c){let e=document.querySelector("canvas[data-scene]");if(e){let t=new CustomEvent("windowUpdate",{detail:{id:s,bounds:null}});e.dispatchEvent(t)}}},[c,s]);let M=(0,l.useCallback)(()=>{if(!c)return;let e=document.querySelector('[data-frosted-box="'.concat(s,'"]'));if(!e){console.log("Window element not found for id: ".concat(s));return}let t=e.getBoundingClientRect(),r=new CustomEvent("windowUpdate",{detail:{id:s,bounds:{left:t.left,right:t.right,top:t.top,bottom:t.bottom,isActive:m}}}),n=document.querySelector("canvas[data-scene]");null==n||n.dispatchEvent(r)},[m,s,c]);return(0,l.useEffect)(()=>{let e=v.on("change",M),t=w.on("change",M);return()=>{e(),t()}},[v,w,M]),(0,l.useEffect)(()=>{M()},[m,M]),(0,n.jsx)(a.M,{children:c&&(0,n.jsxs)(o.E.div,{id:s,className:"frosted-window z-50 ".concat(x||""),"data-frosted-box":s,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},style:{position:"fixed",top:0,left:0,padding:"2rem",backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",borderRadius:"0.75rem",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white",minWidth:"300px",maxHeight:"80vh",overflowY:"auto",x:v,y:w,zIndex:50,...g},onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),drag:!0,dragMomentum:!1,onDragStart:()=>b(!0),onDragEnd:(e,t)=>{f&&f({x:v.get(),y:w.get()})},dragElastic:0,dragTransition:{power:0,timeConstant:0},children:[(0,n.jsx)("div",{className:"window-header",style:{position:"relative"},children:y&&(0,n.jsx)("button",{onClick:d,style:{position:"absolute",top:"-1rem",right:"-1rem",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.4)",borderRadius:"4px",color:"white",fontSize:"16px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.2)"},children:"\xd7"})}),(0,n.jsx)("div",{className:"window-content",children:u})]})})}}}]);