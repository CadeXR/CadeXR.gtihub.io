"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[904],{4943:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(7437),o=r(2265);function i(){let e={NORMAL:4,TRANSITION:4},t=(0,o.useRef)(null),r=(0,o.useRef)([]),i=(0,o.useRef)(),a=(0,o.useRef)(new Map);(0,o.useRef)(1);let l=(0,o.useRef)(!1),s=(0,o.useRef)(0),c=(0,o.useRef)("in"),d=(0,o.useRef)({x:0,y:0}),u=(0,o.useRef)([]),h=(0,o.useCallback)(t=>{r.current=Array.from({length:150},()=>{let r=Math.random()*Math.PI*2;return{x:Math.random()*t.width,y:Math.random()*t.height,vx:3*Math.cos(r),vy:3*Math.sin(r),size:e.NORMAL,trail:[],isFollowing:!1,followingWindowId:null,isOrbiting:!1,orbitAngle:Math.random()*Math.PI*2,orbitRadius:30+30*Math.random(),transitionProgress:0,edgeIndex:Math.floor(4*Math.random())}})},[]),f=(0,o.useCallback)(t=>{u.current=Array.from({length:150},()=>{let r=Math.random()*Math.PI*2;return{x:Math.random()*t.width,y:Math.random()*t.height,vx:1.5*Math.cos(r),vy:1.5*Math.sin(r),size:.75*e.NORMAL,trail:[],isFollowing:!1,followingWindowId:null,isOrbiting:!1,orbitAngle:Math.random()*Math.PI*2,orbitRadius:30+30*Math.random(),transitionProgress:0,edgeIndex:Math.floor(4*Math.random())}})},[]),g=(0,o.useCallback)(t=>{let n=t.getContext("2d");if(!n)return;if(l.current){let t=Math.min((performance.now()-s.current)/3500,1);t>=1&&(l.current=!1),r.current.forEach(r=>{"in"===c.current?r.size=e.NORMAL+(e.TRANSITION-e.NORMAL)*t:r.size=e.TRANSITION-(e.TRANSITION-e.NORMAL)*t})}let o=Array.from(a.current.values()).filter(e=>e.isActive);r.current.forEach(e=>{let r=e.x-d.current.x,n=e.y-d.current.y,i=Math.sqrt(r*r+n*n);if(i<20&&(e.x=d.current.x+r/i*20,e.y=d.current.y+n/i*20),o.length>0){let t,r;let n=o[0];e.isOrbiting||(e.isOrbiting=!0,e.edgeIndex=Math.floor(4*Math.random()));let i=n.right-n.left,a=n.bottom-n.top,l=e.orbitAngle/(2*Math.PI)%1;switch(e.edgeIndex){case 0:t=n.left+i*l,r=n.top+20;break;case 1:t=n.right-20,r=n.top+a*l;break;case 2:t=n.right-i*l,r=n.bottom-20;break;case 3:t=n.left+20,r=n.bottom-a*l;break;default:t=e.x,r=e.y}let s=t-e.x,c=r-e.y,d=Math.sqrt(s*s+c*c);d>0&&(e.vx=s/d*3,e.vy=c/d*3),e.x+=e.vx,e.y+=e.vy,e.orbitAngle+=.02,l>=.98&&(e.edgeIndex=(e.edgeIndex+1)%4)}else{if(e.isOrbiting){let t=Math.random()*Math.PI*2;e.vx=3*Math.cos(t),e.vy=3*Math.sin(t),e.isOrbiting=!1}e.x+=e.vx,e.y+=e.vy,(e.x<=0||e.x>=t.width)&&(e.vx*=-1),(e.y<=0||e.y>=t.height)&&(e.vy*=-1)}e.trail.push({x:e.x,y:e.y}),e.trail.length>200&&e.trail.shift()}),n.fillStyle="#ffffff",r.current.forEach(e=>{e.trail.length>1&&(n.beginPath(),n.moveTo(e.trail[0].x,e.trail[0].y),e.trail.forEach((e,t)=>{0!==t&&n.lineTo(e.x,e.y)}),n.strokeStyle="rgba(255, 255, 255, ".concat(.4,")"),n.stroke()),n.beginPath(),n.arc(e.x,e.y,e.size,0,2*Math.PI),n.fillStyle="rgba(255, 255, 255, 0.68)",n.fill()})},[]),x=(0,o.useCallback)(e=>{let t=e.getContext("2d");t&&u.current.forEach(r=>{r.x+=r.vx,r.y+=r.vy,r.x<=10?(r.x=10,r.vx=Math.abs(r.vx)):r.x>=e.width-10&&(r.x=e.width-10,r.vx=-Math.abs(r.vx)),r.y<=10?(r.y=10,r.vy=Math.abs(r.vy)):r.y>=e.height-10&&(r.y=e.height-10,r.vy=-Math.abs(r.vy)),(r.x<=10||r.x>=e.width-10)&&(r.vy+=(Math.random()-.5)*.5),(r.y<=10||r.y>=e.height-10)&&(r.vx+=(Math.random()-.5)*.5),r.trail.push({x:r.x,y:r.y}),r.trail.length>200&&r.trail.shift(),r.trail.length>1&&(t.beginPath(),t.moveTo(r.trail[0].x,r.trail[0].y),r.trail.forEach((e,r)=>{0!==r&&t.lineTo(e.x,e.y)}),t.strokeStyle="rgba(255, 255, 255, ".concat(.2,")"),t.stroke()),t.beginPath(),t.arc(r.x,r.y,r.size,0,2*Math.PI),t.fillStyle="#ffffff",t.fill()})},[]),m=(0,o.useCallback)(e=>{let r=t.current;if(!r)return;let n=r.getContext("2d");n&&(n.fillStyle="black",n.fillRect(0,0,r.width,r.height),x(r),g(r),i.current=requestAnimationFrame(m))},[g,x]);return(0,o.useEffect)(()=>{let e=t.current;if(!e)return;let r=e=>{let t=e.detail.direction;l.current=!0,s.current=performance.now(),c.current="grow"===t?"in":"out",document.querySelectorAll(".scene-transition-grow, .scene-transition-shrink").forEach(e=>e.remove());let r=document.createElement("div");r.className="scene-transition-".concat(t),document.body.appendChild(r),setTimeout(()=>{r.remove()},3500)};return e.addEventListener("startTransition",r),()=>{e.removeEventListener("startTransition",r),document.querySelectorAll(".scene-transition-grow, .scene-transition-shrink").forEach(e=>e.remove())}},[]),(0,o.useEffect)(()=>{let e=t.current;if(!e)return;let r=e=>{let{bounds:t,id:r}=e.detail;t?a.current.set(r||"default",{...t,id:r||"default",isActive:t.isActive}):a.current.delete(r||"default")};return e.addEventListener("windowUpdate",r),()=>{e.removeEventListener("windowUpdate",r)}},[]),(0,o.useEffect)(()=>{let e=e=>{d.current={x:e.clientX,y:e.clientY}};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[]),(0,o.useEffect)(()=>{let e=t.current;if(!e)return;let r=()=>{e.width=window.innerWidth,e.height=window.innerHeight,h(e),f(e)};return r(),i.current=requestAnimationFrame(m),window.addEventListener("resize",r),()=>{i.current&&cancelAnimationFrame(i.current),window.removeEventListener("resize",r)}},[m,h,f]),(0,o.useEffect)(()=>{console.log("Scene mounted");let e=t.current;if(!e){console.error("Canvas not found");return}console.log("Canvas dimensions:",e.width,e.height);let r=e.getContext("2d");if(!r){console.error("Could not get 2D context");return}r.fillStyle="black",r.fillRect(0,0,e.width,e.height)},[]),(0,n.jsx)("canvas",{ref:t,className:"fixed top-0 left-0 w-full h-full",style:{backgroundColor:"black",zIndex:1},"data-scene":!0})}},3176:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(7437),o=r(1906),i=r(5095),a=r(9124),l=r(2265);function s(e){var t,r;let{id:s,isOpen:c,onClose:d,children:u,defaultPosition:h,onMove:f,style:g,className:x,showCloseButton:m=!0}=e,[v,y]=(0,l.useState)(!1),b=(0,o.c)(null!==(t=null==h?void 0:h.x)&&void 0!==t?t:0),w=(0,o.c)(null!==(r=null==h?void 0:h.y)&&void 0!==r?r:0);(0,l.useEffect)(()=>{console.log("FrostedWindow ".concat(s," isOpen:"),c),console.log("FrostedWindow ".concat(s," position:"),h)},[s,c,h]),(0,l.useEffect)(()=>{if(!c){let e=document.querySelector("canvas[data-scene]");if(e){let t=new CustomEvent("windowUpdate",{detail:{id:s,bounds:null}});e.dispatchEvent(t)}}},[c,s]);let M=(0,l.useCallback)(()=>{if(!c)return;let e=document.querySelector('[data-frosted-box="'.concat(s,'"]'));if(!e){console.log("Window element not found for id: ".concat(s));return}let t=e.getBoundingClientRect(),r=new CustomEvent("windowUpdate",{detail:{id:s,bounds:{left:t.left,right:t.right,top:t.top,bottom:t.bottom,isActive:v}}}),n=document.querySelector("canvas[data-scene]");null==n||n.dispatchEvent(r)},[v,s,c]);return(0,l.useEffect)(()=>{let e=b.on("change",M),t=w.on("change",M);return()=>{e(),t()}},[b,w,M]),(0,l.useEffect)(()=>{M()},[v,M]),(0,n.jsx)(i.M,{children:c&&(0,n.jsxs)(a.E.div,{id:s,className:"frosted-window z-50 ".concat(x||""),"data-frosted-box":s,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},style:{position:"fixed",top:0,left:0,padding:"2rem",backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",borderRadius:"0.75rem",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white",minWidth:"300px",maxHeight:"80vh",overflowY:"auto",x:b,y:w,zIndex:50,...g},onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),drag:!0,dragMomentum:!1,onDragStart:()=>y(!0),onDragEnd:(e,t)=>{f&&f({x:b.get(),y:w.get()})},dragElastic:0,dragTransition:{power:0,timeConstant:0},children:[(0,n.jsx)("div",{className:"window-header",style:{position:"relative"},children:m&&(0,n.jsx)("button",{onClick:d,style:{position:"absolute",top:"-1rem",right:"-1rem",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.4)",borderRadius:"4px",color:"white",fontSize:"16px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.2)"},children:"\xd7"})}),(0,n.jsx)("div",{className:"window-content",children:u})]})})}}}]);